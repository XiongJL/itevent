<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>IT事件管理系统</title>
    <link th:href="@{../css/layui.css}" href="../css/layui.css" rel="stylesheet" type="text/css">
<!--    <link th:href="@{../css/ite/common.css}" rel="stylesheet" type="text/css">-->
    <style>
        .layadmin-backlog-body h3 {
            padding-bottom: 10px;
            font-size: 12px;
        }
        .layadmin-backlog .layadmin-backlog-body {
            display: block;
            padding: 10px 15px;
            background-color: #f8f8f8;
            color: #999;
            border-radius: 2px;
            transition: all .3s;
            -webkit-transition: all .3s;
        }
        .layadmin-backlog-body p cite {
            font-style: normal;
            font-size: 30px;
            font-weight: 300;
            color: #009688;
        }
        .myicon{
            font-size: 40px;
            height: 60px;
            line-height: 60px;
        }
        .setCenter{
            text-align: center;
        }
    </style>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div th:include="common/head :: head"></div>
    <div th:include="common/nav :: nav"></div>

    <div class="layui-body"style=" bottom: 0px">
        <div class="layui-container" >
    <!--一页两用-->
<!--    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
<!--        <legend>任务进程</legend>-->
<!--    </fieldset>-->
    <!-- 内容主体区域 -->

        <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
                <div class="layui-card layui-col-md12 layui-col-xs12">
                    <div class="layui-card-header">任务进程</div>
                    <div class="layui-card-body">
                        <div>申请人: <span th:text="${start.username}"></span></div>
                        <div>申请人工号: <span th:text="${start.userid}"></span></div>
                        <div>联系方式: <span th:text="${start.phone}"></span></div>
                        <div>任务状态: <span th:text="${start.state}"></span></div>
                        <!--折叠卡片开始-->
                        <div class="layui-collapse" lay-filter="test">
                            <div class="layui-colla-item">
                                <h2 class="layui-colla-title">详细信息</h2>
                                <div class="layui-colla-content">
                                    <div>事件类型: <span th:text="${start.type}"></span> </div>
                                    <div>事件状态: <span th:text="${start.state}"></span> </div>
                                    <div>物料ID: <span th:text="${start.itemid}"></span></div>
                                    <div>用户描述: <span th:text="${start.remark}"></span></div>
                                    <div>填单人: <span th:text="${start.adminuser}"></span></div>
                                    <div>图片描述:</div>
                                    <div class=""  id="photos" >
                                        <div><img th:each="url : ${imgUrls}" src="../images/face/0.gif" th:src="'../itevent/img/'+${url}" style="height: 8rem"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--折叠卡片结束-->
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-col-md12 layui-col-xs12" style="margin-top: 3%">
        <ul class="layui-timeline">
            <!--第二个参数包含状态变量
           index:当前迭代对象的index（从0开始计算）
        count: 当前迭代对象的index(从1开始计算)
        size:被迭代对象的大小
        current:当前迭代变量
        even/odd:布尔值，当前循环是否是偶数/奇数（从0开始计算）
        first:布尔值，当前循环是否是第一个
        last:布尔值，当前循环是否是最后一个
            -->
            <li class="layui-timeline-item" th:each="step,stepState : ${ing}">
                <!--如果是第一个才使用旋转图标-->
                <i th:if="${stepState.first} ==true" class="layui-icon layui-anim layui-anim-rotate layui-anim-loop layui-timeline-axis"></i>
                <i th:if="${stepState.first} !=true" class="layui-icon layui-timeline-axis"></i>

                <div class="layui-timeline-content layui-text">
                    <div th:if="${stepState.last} !=true">
                        <h3 class="layui-timeline-title"><span th:text="${step.step}" ></span></h3>
                        <h4>当前环节开始时间<span th:text="${step.stepDate}"></span></h4>
                        <div>当前处理人: <span th:text="${step.executorName}"></span></div>
                    </div>
                    <!--最后是事件的起始节点,用户填单时的时间-->
                    <div th:if="${stepState.last} ==true">
                        <h3 class="layui-timeline-title"><span th:text="${start.date}"></span></h3>
                        <p>
                            用户发出申请 <i class="layui-icon"></i>
                        </p>
                    </div>

                </div>
            </li>

        </ul>
        </div>
    </div>
    </div>
</div>
<!-- jQuery-->
<script th:src="@{../js/jquery-3.4.0.min.js}" type="text/javascript"></script>
<script th:src="@{../js/layui.js}"  type="text/javascript"></script>
<script>
    layui.use(['element', 'layer','carousel'], function(){
        var element = layui.element;
        var layer = layui.layer;

        //监听折叠
        element.on('collapse(test)', function(data){
           // layer.msg('展开状态：'+ data.show);
        });
        layer.photos({
            photos: '#photos'
            ,anim: 5 //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）
        });


    });

</script>
</body>
</html>
